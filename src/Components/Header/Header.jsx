import { useState, useEffect } from 'react'
import { Logo } from '../../assets/Img'
import mainStyles from "../.././main.module.sass"
import s from './Header.module.sass'
import { Link, useLocation } from 'react-router-dom'

import { useTranslation } from 'react-i18next'


function Header() {


  const { i18n, t } = useTranslation("header");


  const [count, setCount] = useState(0)

  const [currentTime, setCurrentTime] = useState(new Date())

  useEffect(() => {
    const interval = setInterval(() => {
      setCurrentTime(new Date())
    }, 1000)

    return () => clearInterval(interval)
  }, [])

  const [isOpen, setOpen] = useState();

  const location = useLocation();

  const navLinks = [
    { path: "/", label: "nav.index" },
    { path: "/about", label: "nav.about" },
    { path: "/works", label: "nav.works" },
    { path: "/contacts", label: "nav.contacts" },
  ];


  const changeLanguage = (lang) => {
    i18n.changeLanguage(lang)
  }


  return (
    <header>
      <Link to={"/"} className={s.link}>
        <svg className={s.logo} viewBox="0 0 1174 256" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M115.442 207.802C115.442 233.262 97.6166 251.934 69.8171 251.934H0V97.2599H62.8142C92.0991 97.2599 108.652 114.021 108.652 136.512C108.652 152.213 101.224 163.67 87.2183 170.247C106.954 177.885 115.442 189.131 115.442 207.802ZM88.916 139.27C88.916 123.569 79.7909 114.658 57.9333 114.658H19.7355V163.882H57.9333C79.7909 163.882 88.916 154.971 88.916 139.27ZM95.7067 208.014C95.7067 192.95 86.5817 181.28 67.9072 181.28H19.7355V234.535H67.9072C86.5817 234.535 95.7067 222.866 95.7067 208.014Z" />
          <path d="M269.672 177.037C269.672 222.442 240.387 255.753 194.974 255.753C150.41 255.753 120.277 224.139 120.277 175.764C120.277 127.388 150.41 93.4408 194.762 93.4408C240.175 93.4408 269.672 127.176 269.672 177.037ZM249.937 176.612C249.937 137.573 228.291 110.839 194.762 110.839C162.082 110.839 140.012 137.573 140.012 175.764C140.012 213.955 162.082 238.355 194.974 238.355C227.655 238.355 249.937 213.955 249.937 176.612Z" />
          <path d="M418.968 251.934H406.448L401.567 231.565C386.5 248.327 369.736 255.753 348.727 255.753C306.921 255.753 277.849 223.715 277.849 176.188C277.849 129.934 304.799 93.4408 352.122 93.4408C387.561 93.4408 411.329 112.748 416.846 144.15H396.686C392.442 124.206 375.465 110.839 351.91 110.839C319.23 110.839 297.584 137.148 297.584 175.127C297.584 212.894 317.956 238.355 352.971 238.355C381.195 238.355 401.567 219.471 401.567 191.889V187.645H354.456V170.247H418.968V251.934Z" />
          <path d="M563.604 208.609C561.938 214.321 560.682 219.073 559.842 222.854C559.008 226.606 558.56 229.501 558.56 231.456C558.56 233.082 559.221 234.551 560.362 235.835L560.392 235.867L560.423 235.898C561.654 237.13 563.081 237.94 564.688 237.94C566.695 237.94 568.845 236.955 571.069 235.351L571.07 235.352C575.037 232.552 581.352 225.958 589.953 215.749C589.953 215.823 590.5 220.426 590.5 220.5L590.247 222.4C583.419 231.117 576.536 238.376 569.598 244.189L569.59 244.196C561.069 251.433 553.275 254.875 546.177 254.875C542.542 254.875 539.627 253.613 537.314 251.09C535.035 248.604 533.793 244.98 533.793 240C533.793 233.462 535.521 224.554 539.064 213.215L539.063 213.214L546.006 191.146L543.315 189.881C526.143 216.409 510.602 234.615 496.709 244.656C487.147 251.536 478.133 254.875 469.641 254.875C461.4 254.875 454.108 251.381 447.725 244.186L447.11 243.478C440.758 235.754 437.5 225.216 437.5 211.699C437.5 194.342 443.033 175.728 454.217 155.833C465.379 135.976 480.114 119.835 498.428 107.392L498.438 107.385C512.89 97.3973 526.002 92.5216 537.811 92.5215C544.013 92.5215 549.266 93.7833 553.627 96.2432C558.013 98.7173 562.433 102.878 566.866 108.827L568.688 111.271L586.95 46.417C588.254 42.0308 589.319 38.5408 590.146 35.9434L590.149 35.9307L590.153 35.9189C591.597 31.1068 592.352 27.0332 592.353 23.7412C592.353 20.8446 591.298 18.3665 589.206 16.4141L589.167 16.3789L589.126 16.3447C586.312 14.0668 582.752 12.9854 578.571 12.9854C575.996 12.9854 571.971 13.3387 566.544 14.0254V10.417L624.164 0.869141L563.604 208.609ZM1155.85 92.5215C1160.36 92.5216 1164.36 94.3771 1167.92 98.2637L1167.93 98.2793C1171.44 102.009 1173.22 106.672 1173.22 112.38C1173.22 118.271 1172.3 123.921 1170.45 129.338C1167.43 138.192 1161.74 149.11 1153.35 162.116C1144.98 174.966 1131.44 192.288 1112.71 214.104C1110.37 216.794 1097.39 230.361 1073.7 254.875H1069.19C1067.76 217.958 1065.59 187.895 1062.65 164.699C1059.68 141.256 1055.93 124.664 1051.3 115.108L1051.3 115.102L1050.99 114.504C1049.44 111.555 1047.39 109.255 1044.82 107.676C1042.08 105.992 1038.84 105.185 1035.18 105.185C1033.24 105.185 1030.84 105.399 1027.99 105.818C1026.95 104.772 1025.89 103.778 1024.81 102.837L1071.82 92.75C1075.03 100.547 1077.67 108.483 1079.75 116.561L1080.18 118.258C1083.16 130.753 1085.63 145.449 1087.59 162.352L1087.97 165.763C1088.92 174.981 1090.22 194.521 1091.88 224.42L1092.08 228.005L1094.49 225.344C1109.3 208.996 1118.21 198.779 1121.11 194.782L1121.11 194.781C1136.75 173.57 1145.81 161.063 1148.21 157.335L1148.22 157.325L1148.23 157.314C1152.17 150.99 1154.95 145.376 1156.55 140.485C1157.91 136.79 1158.6 133.232 1158.6 129.823C1158.6 127.821 1157.7 125.84 1156.19 123.915C1154.68 121.986 1152.47 119.996 1149.63 117.938C1144.4 114.075 1142.05 109.965 1142.05 105.616C1142.05 102.47 1143.18 99.6271 1145.56 97.0449L1146.06 96.5322C1148.87 93.8389 1152.11 92.5215 1155.85 92.5215ZM536.921 98.5986C521.134 98.5986 505.138 111.577 488.856 136.296L488.854 136.3C472.604 161.151 464.402 185.047 464.402 207.962C464.402 217.058 466.401 224.272 470.619 229.385L470.625 229.393L470.631 229.399C474.796 234.322 479.886 236.872 485.838 236.872C492.539 236.872 499.838 233.262 507.687 226.496C515.563 219.706 524.174 209.582 533.523 196.183C552.227 169.378 561.737 145.755 561.737 125.374C561.737 117.473 559.444 110.966 554.74 106.008C550.048 101.062 544.068 98.5986 536.921 98.5986Z"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M689.488 93.0215C696.147 93.0216 701.542 94.7065 705.807 97.959L706.216 98.2793L706.227 98.2881L706.244 98.3018C710.644 101.741 714.149 107.579 716.576 116.131L718.398 122.55L726.438 97.083L750.425 93.4629L716.584 211.132L716.574 211.162L716.566 211.185L716.562 211.209L716.557 211.229L712.642 227.423L712.638 227.438L712.636 227.447C712.26 229.074 712.051 230.54 712.051 231.812C712.051 234.166 712.801 236.284 714.295 238.077L714.31 238.095L714.314 238.102L714.32 238.108L714.337 238.126C715.664 239.618 717.394 240.398 719.391 240.398C721.637 240.398 724.113 239.077 726.654 237.141L727.109 236.794L727.107 236.792C731.689 233.23 737.466 226.555 744.416 216.965L747.254 218.969C739.499 230.383 731.589 239.089 723.54 245.156C715.069 251.422 707.472 254.375 700.701 254.375C695.923 254.375 692.657 253.156 690.546 251.045C688.553 249.052 687.395 245.964 687.395 241.424C687.395 235.87 688.648 228.415 691.239 218.993L691.315 218.712L695.085 205.256L691.712 203.569L691.461 203.897C675.987 224.096 661.868 238.054 649.119 245.94L649.117 245.942L649.098 245.954C639.97 251.616 631.134 254.375 622.563 254.375C614.785 254.375 608.021 251.308 602.196 244.992L601.636 244.371C595.758 237.599 592.703 228.212 592.703 215.971C592.703 197.51 598.218 177.96 609.373 157.294L609.479 157.097C620.725 136.423 634.915 119.938 652.033 107.595L652.041 107.59L652.049 107.584L652.048 107.583C665.481 97.7717 677.949 93.0215 689.488 93.0215ZM689.844 98.2773C681.607 98.2775 673.097 102.136 664.356 109.42C651.969 119.743 641.02 134.954 631.452 154.921L631.443 154.938L631.435 154.955C621.978 174.946 617.182 193.161 617.182 209.563C617.182 217.955 619.283 224.864 623.696 230.065L623.706 230.079L623.717 230.091L623.723 230.098L623.726 230.102C628.066 235.08 633.214 237.728 639.116 237.729C653.027 237.728 667.608 227.506 682.863 208.318C703.373 182.651 713.737 156.178 713.737 128.934C713.737 118.672 711.76 110.781 707.374 105.729C703.026 100.722 697.101 98.2775 689.844 98.2773Z"/>
          <path d="M867.119 92.5215C872.686 92.5216 877.149 94.3422 880.638 97.9395L880.654 97.9561C884.249 101.551 886.088 106.253 886.088 112.202C886.088 119.114 884.412 128.449 880.986 140.263L859.271 215.197V215.2C858.022 219.541 857.079 223.054 856.448 225.728C855.831 228.344 855.474 230.305 855.474 231.456C855.474 233.424 856.044 235.187 857.227 236.665L857.251 236.695L857.276 236.725C858.409 237.999 859.796 238.83 861.424 238.83C863.349 238.83 865.399 237.812 867.496 236.208L867.507 236.2L867.517 236.191C873.718 231.277 880.416 223.936 887.619 214.23L890.602 216.059C879.961 231.077 869.952 241.753 860.587 248.188C853.832 252.73 847.955 254.875 842.912 254.875C838.859 254.875 835.776 253.629 833.495 251.244L833.472 251.221L833.262 251.005C831.128 248.753 829.995 245.675 829.995 241.602C829.995 236.145 831.95 226.545 835.987 212.652L835.988 212.649L856.633 141.104C859.255 132.163 860.609 125.057 860.609 119.856C860.609 117.146 859.719 114.841 857.856 113.1C856.022 111.266 853.738 110.347 851.101 110.347C847.609 110.347 843.648 111.739 839.27 114.311L838.389 114.841C829.394 120.312 820.129 129.305 810.579 141.719C801.024 154.021 790.955 169.756 780.371 188.902C774.74 199.087 770.072 210.22 766.366 222.295L766.365 222.3L757.787 250.604H734.2L766.037 141.1L766.04 141.09C767.933 134.404 769.44 129.186 770.433 125.216C771.41 121.308 771.957 118.372 771.787 116.349C771.45 112.336 768.786 109.409 768.244 108.754C767.799 108.216 766.985 107.549 765.964 107.003C764.922 106.446 763.566 105.961 762.021 105.897C760.554 105.838 758.709 106.14 757.324 106.422C756.999 106.488 756.69 106.555 756.408 106.619L755.843 103.224L803.566 93.0137L780.6 171.587L783.285 172.843C805.479 139.729 822.354 118.105 833.941 107.806L833.94 107.805C845.651 97.5008 856.703 92.5215 867.119 92.5215Z"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M988.986 92.5215C1004.28 92.5215 1016.76 97.5463 1026.54 107.555L1026.54 107.562C1036.43 117.565 1041.42 130.575 1041.42 146.732C1041.42 164.253 1036.75 181.63 1027.36 198.879L1027.36 198.886C1018.11 216.094 1005.18 229.72 988.565 239.785C971.894 249.882 955.785 254.875 940.217 254.875C924.309 254.875 911.416 249.838 901.407 239.829C891.521 229.706 886.54 216.637 886.54 200.486C886.54 183.343 891.435 166.095 901.292 148.726C911.257 131.375 924.49 117.678 940.998 107.609L940.997 107.608C957.671 97.5108 973.661 92.5216 988.986 92.5215ZM984.359 98.7773C966.099 98.7774 949.628 111.893 934.83 137.073L934.829 137.075C920.122 162.184 912.73 187.243 912.73 212.233C912.73 223.752 915.644 232.884 921.672 239.415L921.677 239.421L921.682 239.426C927.674 245.793 935.255 248.976 944.312 248.976C961.873 248.975 977.926 235.959 992.593 211.038C1007.43 185.919 1014.87 160.383 1014.87 134.451C1014.87 123.196 1012.09 114.356 1006.3 108.173C1000.65 101.9 993.294 98.7774 984.359 98.7773Z"/>
          <path d="M748.5 210.5L739 224.5L732.5 237L747.5 222L748.5 210.5Z"  />
          <path d="M595 210L589.953 215.749L590.247 222.4L595 217V210Z"  />
          <path d="M900 196L884 220V224L898.5 206.5L900 196Z"  />
          <path d="M1015.5 108L1027.99 105.818L1042.5 99.5L1010.5 105.228L1015.5 108Z"  />
        </svg>
      </Link>
      <button className={`${s.bmButton} ${isOpen ? s.buttonActive : ''}`} onClick={()=> setOpen(!isOpen)} ></button>
      <div className={`${s.bm} ${isOpen ? s.active : ""}`}>
        <nav>
          {navLinks.map(({ path, label }, index) => (
            <Link
              key={path}
              to={path}
              className={`${s.link} ${location.pathname === path ? s.activeLink : ''}`}
            >
              {t(label)}{index !== navLinks.length - 1 ? ',' : ''}
            </Link>
          ))}
        </nav>
        <div className={s.localeStatus}>
          <div className={s.content}>
            <div className={s.languageWrapper}>
              <button className={`${s.language} ${i18n.language === 'ru' ? s.active : ''}`} onClick={() => changeLanguage('ru')}>
                ru
              </button>
              <p className={s.languageLine}>
                &#160;/&#160;
              </p>
              <button className={`${s.language} ${i18n.language === 'en' ? s.active : ''}`} onClick={() => changeLanguage('en')}>
                en
              </button>
              {/* <p className={s.language}>
                en&#160;/&#160;ru
              </p> */}
            </div>
            <p className={s.time}>
              GMT+7&#160;&#160;{currentTime.toLocaleTimeString('en-US', {timeZone:'Asia/Bangkok', hour12: false,})}
            </p>
          </div>
        </div>
      </div>
    </header>
  )
}

export default Header